import{d as T}from"./index-1a938aa7.js";import{t as E}from"./tableHandle-00f49707.js";import{f as H,r as U,e as j,a as t,o as d,c as m,d as l,w as n,u as r,b as I,F as f,g as y,j as b}from"./index-136834c8.js";import"./http-10d204f8.js";const L={class:"dorm"},M=I("h1",null,"宿舍信息",-1),K={__name:"Dorm",setup(O){H(s);const k=[{name:"宿舍楼",key:"dormBuilding",width:100},{name:"宿舍号",key:"dormName",width:100},{name:"规格",key:"maxCapacityText",width:100},{name:"入住人数",key:"currentIn",width:100},{name:"是否满员",key:"isFullText",width:100}],o=U({isFull:"",dormBuilding:""}),C=[{label:"是",key:1},{label:"否",key:0}],{pageSize:_,pageNum:x,total:c,handleCurrentChange:v,handleSizeChange:w,reset:F}=E(s,o),p=j([]);async function s(){const g=await T.getDorms({...o,pageSize:_.value,pageNum:x.value}),{data:a}=g;a.list.forEach(u=>{u.maxCapacityText=u.maxCapacity+"人间",u.isFullText=u.isFull?"是":"否"}),p.value=a.list,c.value=a.total}return(g,a)=>{const u=t("el-input"),i=t("el-form-item"),V=t("el-option"),z=t("el-select"),h=t("el-button"),B=t("el-form"),N=t("el-table-column"),D=t("el-table"),S=t("el-pagination");return d(),m("div",L,[M,l(B,{inline:"true","label-width":"70"},{default:n(()=>[l(i,{label:"宿舍楼"},{default:n(()=>[l(u,{modelValue:o.dormBuilding,"onUpdate:modelValue":a[0]||(a[0]=e=>o.dormBuilding=e),placeholder:"宿舍楼"},null,8,["modelValue"])]),_:1}),l(i,{label:"是否满员"},{default:n(()=>[l(z,{modelValue:o.isFull,"onUpdate:modelValue":a[1]||(a[1]=e=>o.isFull=e),placeholder:"是否满员"},{default:n(()=>[(d(),m(f,null,y(C,e=>l(V,{key:e.key,label:e.label,value:e.key},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(i,null,{default:n(()=>[l(h,{type:"primary",onClick:s},{default:n(()=>[b("查询")]),_:1}),l(h,{onClick:r(F)},{default:n(()=>[b("重置")]),_:1},8,["onClick"])]),_:1})]),_:1}),l(D,{data:p.value,style:{width:"100%","margin-bottom":"30px"},"max-height":"600px"},{default:n(()=>[(d(),m(f,null,y(k,e=>l(N,{key:e.key,prop:e.key,label:e.name,"min-width":e.width},null,8,["prop","label","min-width"])),64))]),_:1},8,["data"]),l(S,{background:"",layout:"prev, pager, next",total:r(c),"page-size":r(_),onCurrentChange:r(v),onSizeChange:r(w)},null,8,["total","page-size","onCurrentChange","onSizeChange"])])}}};export{K as default};
