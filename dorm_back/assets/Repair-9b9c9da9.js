import{h as r}from"./http-fbdac65a.js";import{t as k}from"./tableHandle-d6735526.js";import{f as C,e as v,p as H,a as i,o as u,c as _,d as s,w as x,u as o,b as z,F as N,g as S}from"./index-f68cef2b.js";const Y=e=>r("repair/record",e,"POST"),A=e=>r("repair/findHistories",e),B=e=>r("repair/findHistoriesAdmin",e),D={record:Y,findHistories:A,findHistoriesAdmin:B};const M={class:"repair"},R=z("h1",null,"宿舍报修",-1),V={__name:"Repair",setup(e){C(c);const h=[{name:"学号",key:"stuNo",width:100},{name:"宿舍楼",key:"building",width:100},{name:"房间号",key:"dorm",width:100},{name:"学生姓名",key:"stuName",width:100},{name:"时间",key:"time",width:100}],{pageSize:l,pageNum:g,total:d,handleCurrentChange:f,handleSizeChange:b}=k(c),p=v([]);async function c(){const m=await D.findHistoriesAdmin({pageSize:l.value,pageNum:g.value}),{data:a}=m;a.list.forEach(t=>{t.time=H(Number(t.time)).format("YYYY-MM-DD HH:mm:ss")}),p.value=a.list,d.value=a.total}return(m,a)=>{const t=i("el-table-column"),y=i("el-table"),w=i("el-pagination");return u(),_("div",M,[R,s(y,{data:p.value,style:{width:"100%","margin-bottom":"30px"},"max-height":"600px"},{default:x(()=>[(u(),_(N,null,S(h,n=>s(t,{key:n.key,prop:n.key,label:n.name,"min-width":n.width},null,8,["prop","label","min-width"])),64))]),_:1},8,["data"]),s(w,{background:"",layout:"prev, pager, next",total:o(d),"page-size":o(l),onCurrentChange:o(f),onSizeChange:o(b)},null,8,["total","page-size","onCurrentChange","onSizeChange"])])}}};export{V as default};
